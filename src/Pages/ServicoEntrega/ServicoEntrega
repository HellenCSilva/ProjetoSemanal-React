import React, {useState} from 'react'
import S from './ServicoEntrega.module.css'
const ServicoEntrega = () => {
//const [cep, setCep] = useState('');
const [valorInput, setValorInput] = useState('');
//const [hist, setHist] = useState([]);
const url = `https://viacep.com.br/ws/${valorInput}
/json/`;

function atualizaInput(target) {
  console.log(target.value);
  setValorInput(target.value);
}

async function handleRequisition(){
    const response = await fetch(url);
    const json = await response.json();
    const resposta = {
        rua: json.logradouro,
        bairro: json.bairro,
    }
    setValorInput(resposta);
    console.log(resposta);
    // setHist(resposta);
}

  return (
    <div>
        <label>CEP:</label><input type="text" value={valorInput} onChange={({target})=>{atualizaInput(target)}}/>
        <button onClick={handleRequisition}>Pesquisar</button>
    </div>
  )
}

export default ServicoEntrega